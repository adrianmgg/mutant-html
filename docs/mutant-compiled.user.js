// ==UserScript==
// @name         Svelte Userscript
// @namespace    https://svelte.dev/
<<<<<<< HEAD
// @version      0.2.1
=======
// @version      0.1
>>>>>>> a45fbfa60402065bc99643c7045dc137d12cbde8
// @updateURL    https://lxhom.github.io/mutant-html/mutant-compiled.user.js
// @downloadURL  https://lxhom.github.io/mutant-html/mutant-compiled.user.js
// @description  try to take over the world!
// @author       cohost.org/lexi
// @match        https://cohost.org/*
// @icon         https://www.google.com/s2/favicons?sz=64&domain=cohost.org
// @grant        GM_xmlhttpRequest
// ==/UserScript==

<<<<<<< HEAD
__init=false;window.onload=(async _=>{if(__init)return;__init=true;let style = document.createElement('style');style.innerHTML = `.btn.svelte-1lyade3.svelte-1lyade3{cursor:pointer}.cat.svelte-1lyade3.svelte-1lyade3{display:flex;align-items:center;justify-content:center;padding:3px;font-size:16px;width:22px;height:22px}input.svelte-1lyade3.svelte-1lyade3,select.svelte-1lyade3.svelte-1lyade3{min-height:19px;margin:1px;padding:0 4px;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;font-size:13px;background:#fff;color:#000;border:1px solid #888;border-radius:0}.bg-click.svelte-1lyade3.svelte-1lyade3{position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,.3);z-index:100}.picker.svelte-1lyade3.svelte-1lyade3{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);width:500px;height:500px;background:white;color:#000;border-radius:10px;z-index:101;display:flex;flex-direction:column;padding:10px}.categories.svelte-1lyade3.svelte-1lyade3{display:flex;flex-direction:row;flex-wrap:wrap}.search.svelte-1lyade3.svelte-1lyade3{display:flex;flex-direction:row;align-items:center;margin-bottom:10px}.search.svelte-1lyade3>input.svelte-1lyade3{flex:1;min-width:10px}.emojis.svelte-1lyade3.svelte-1lyade3{display:flex;flex-direction:row;flex-wrap:wrap;overflow-y:scroll;font-size:200%}.emoji.svelte-1lyade3.svelte-1lyade3{margin:2px 5px}.highlight.svelte-1lyade3.svelte-1lyade3{background:#0ff}.customize.svelte-1lyade3.svelte-1lyade3{margin-left:auto}.hr.svelte-1lyade3.svelte-1lyade3{height:1px;background:#000;margin:5px 0}`;document.head.appendChild(style);;!function(){"use strict";function t(t){if("string"!=typeof t&&(t=""+t),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function e(t){return"string"!=typeof t&&(t=""+t),t}function r(t){this.map={},t instanceof r?t.forEach(function(t,e){this.append(e,t)},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function o(t){return t.bodyUsed?p.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function n(t){return new p(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function i(t){var e=new FileReader;return e.readAsArrayBuffer(t),n(e)}function s(t){var e=new FileReader;return e.readAsText(t),n(e)}function a(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,"string"==typeof t)this._bodyText=t;else if(c.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(c.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else{if(t)throw Error("unsupported BodyInit type");this._bodyText=""}},c.blob?(this.blob=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return p.resolve(this._bodyBlob);if(this._bodyFormData)throw Error("could not read FormData body as blob");return p.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(i)},this.text=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return s(this._bodyBlob);if(this._bodyFormData)throw Error("could not read FormData body as text");return p.resolve(this._bodyText)}):this.text=function(){var t=o(this);return t?t:p.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(f)}),this.json=function(){return this.text().then(JSON.parse)},this}function u(t){var e=t.toUpperCase();return y.indexOf(e)>-1?e:t}function h(t,e){if(e=e||{},this.url=t,this.credentials=e.credentials||"omit",this.headers=new r(e.headers),this.method=u(e.method||"GET"),this.mode=e.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&e.body)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(e.body)}function f(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var r=t.split("="),o=r.shift().replace(/\+/g," "),n=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(o),decodeURIComponent(n))}}),e}function d(t){var e=new r,o=t.trim().split("\n");return o.forEach(function(t){var r=t.trim().split(":"),o=r.shift().trim(),n=r.join(":").trim();e.append(o,n)}),e}function l(t,e){e||(e={}),this._initBody(t),this.type="default",this.url=null,this.status=e.status,this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText,this.headers=e.headers instanceof r?e.headers:new r(e.headers),this.url=e.url||""}var p=window.Bluebird||window.Promise;if(!self.GM_fetch){r.prototype.append=function(r,o){r=t(r),o=e(o);var n=this.map[r];n||(n=[],this.map[r]=n),n.push(o)},r.prototype["delete"]=function(e){delete this.map[t(e)]},r.prototype.get=function(e){var r=this.map[t(e)];return r?r[0]:null},r.prototype.getAll=function(e){return this.map[t(e)]||[]},r.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},r.prototype.set=function(r,o){this.map[t(r)]=[e(o)]},r.prototype.forEach=function(t,e){Object.getOwnPropertyNames(this.map).forEach(function(r){this.map[r].forEach(function(o){t.call(e,o,r,this)},this)},this)};var c={blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in self},y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];a.call(h.prototype),a.call(l.prototype),self.Headers=r,self.Request=h,self.Response=l,self.GM_fetch=function(t,e){var r;return r=h.prototype.isPrototypeOf(t)&&!e?t:new h(t,e),new p(function(t,e){function o(t,e,r){return t?t:/^X-Request-URL:/m.test(e)?r.get("X-Request-URL"):void 0}var n,i={};i.method=r.method,i.url=r.url,i.synchronous=!1,i.onload=function(r){var i=r.status;if(100>i||i>599)return void e(new TypeError("Network request failed"));var s=r.responseHeaders;n=d(s);var a={status:i,statusText:r.statusText,headers:n,url:o(r.finalUrl,s,n)},u=r.responseText;t(new l(u,a))},i.onerror=function(){e(new TypeError("Network request failed"))},i.headers={},r.headers.forEach(function(t,e){i.headers[e]=t}),void 0!==r._bodyInit&&(i.data=r._bodyInit),GM_xmlhttpRequest(i)})},self.GM_fetch.polyfill=!0}}();;;(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function l(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=l(o);fetch(o.href,i)}})();function Y(){}function Ye(e){return e()}function Te(){return Object.create(null)}function Z(e){e.forEach(Ye)}function Ze(e){return typeof e=="function"}function we(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let ue;function Le(e,t){return ue||(ue=document.createElement("a")),ue.href=t,e===ue.href}function _t(e){return Object.keys(e).length===0}function k(e,t){e.appendChild(t)}function O(e,t,l){e.insertBefore(t,l||null)}function E(e){e.parentNode&&e.parentNode.removeChild(e)}function X(e,t){for(let l=0;l<e.length;l+=1)e[l]&&e[l].d(t)}function j(e){return document.createElement(e)}function W(e){return document.createTextNode(e)}function N(){return W(" ")}function xe(){return W("")}function F(e,t,l,n){return e.addEventListener(t,l,n),()=>e.removeEventListener(t,l,n)}function M(e,t,l){l==null?e.removeAttribute(t):e.getAttribute(t)!==l&&e.setAttribute(t,l)}function mt(e){return Array.from(e.childNodes)}function $e(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function Ne(e,t){e.value=t==null?"":t}function pe(e,t,l,n){l===null?e.style.removeProperty(t):e.style.setProperty(t,l,n?"important":"")}function x(e,t){for(let l=0;l<e.options.length;l+=1){const n=e.options[l];if(n.__value===t){n.selected=!0;return}}e.selectedIndex=-1}function ge(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function te(e,t,l){e.classList[l?"add":"remove"](t)}let Ce;function ce(e){Ce=e}const re=[],ee=[],_e=[],ye=[],dt=Promise.resolve();let je=!1;function ht(){je||(je=!0,dt.then(et))}function le(e){_e.push(e)}function ve(e){ye.push(e)}const be=new Set;let ae=0;function et(){const e=Ce;do{for(;ae<re.length;){const t=re[ae];ae++,ce(t),pt(t.$$)}for(ce(null),re.length=0,ae=0;ee.length;)ee.pop()();for(let t=0;t<_e.length;t+=1){const l=_e[t];be.has(l)||(be.add(l),l())}_e.length=0}while(re.length);for(;ye.length;)ye.pop()();je=!1,be.clear(),ce(e)}function pt(e){if(e.fragment!==null){e.update(),Z(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(le)}}const me=new Set;let Q;function ne(){Q={r:0,c:[],p:Q}}function oe(){Q.r||Z(Q.c),Q=Q.p}function L(e,t){e&&e.i&&(me.delete(e),e.i(t))}function I(e,t,l,n){if(e&&e.o){if(me.has(e))return;me.add(e),Q.c.push(()=>{me.delete(e),n&&(l&&e.d(1),n())}),e.o(t)}else n&&n()}function ke(e,t,l){const n=e.$$.props[t];n!==void 0&&(e.$$.bound[n]=l,l(e.$$.ctx[n]))}function fe(e){e&&e.c()}function ie(e,t,l,n){const{fragment:o,after_update:i}=e.$$;o&&o.m(t,l),n||le(()=>{const s=e.$$.on_mount.map(Ye).filter(Ze);e.$$.on_destroy?e.$$.on_destroy.push(...s):Z(s),e.$$.on_mount=[]}),i.forEach(le)}function se(e,t){const l=e.$$;l.fragment!==null&&(Z(l.on_destroy),l.fragment&&l.fragment.d(t),l.on_destroy=l.fragment=null,l.ctx=[])}function gt(e,t){e.$$.dirty[0]===-1&&(re.push(e),ht(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Me(e,t,l,n,o,i,s,c=[-1]){const r=Ce;ce(e);const _=e.$$={fragment:null,ctx:[],props:i,update:Y,not_equal:o,bound:Te(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(r?r.$$.context:[])),callbacks:Te(),dirty:c,skip_bound:!1,root:t.target||r.$$.root};s&&s(_.root);let m=!1;if(_.ctx=l?l(e,t.props||{},(v,g,...h)=>{const b=h.length?h[0]:g;return _.ctx&&o(_.ctx[v],_.ctx[v]=b)&&(!_.skip_bound&&_.bound[v]&&_.bound[v](b),m&&gt(e,v)),g}):[],_.update(),m=!0,Z(_.before_update),_.fragment=n?n(_.ctx):!1,t.target){if(t.hydrate){const v=mt(t.target);_.fragment&&_.fragment.l(v),v.forEach(E)}else _.fragment&&_.fragment.c();t.intro&&L(e.$$.fragment),ie(e,t.target,t.anchor,t.customElement),et()}ce(r)}class Se{$destroy(){se(this,1),this.$destroy=Y}$on(t,l){if(!Ze(l))return Y;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(l),()=>{const o=n.indexOf(l);o!==-1&&n.splice(o,1)}}$set(t){this.$$set&&!_t(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function vt(){let e=[],t=[],l=[],n={},o=s=>[...new Set(s)];e=JSON.parse(localStorage.emoji_data);let i={};for(let s of e){let c=s.cat;if(t.includes(c)||(t.push(c),l.push(s),i[c]={}),i[c][s.root]||(i[c][s.root]=[]),i[c][s.root].push(s),s.root==="hand"){let{morph:r,color:_}=s;n[r]||(n[r]=[]),n[r]=o([...n[r],_])}}return{emojis:e,categories:t,catIcons:l,morphs:n}}function Ae(e){let t,l,n;return{c(){t=j("img"),Le(t.src,l="https://lxhom.github.io/mutant-html/assets/webp_128/"+e[0].short+".webp")||M(t,"src",l),pe(t,"width","1em"),pe(t,"height","1em"),pe(t,"max-width","1000px"),M(t,"alt",n=e[0].short+" emoji")},m(o,i){O(o,t,i)},p(o,i){i&1&&!Le(t.src,l="https://lxhom.github.io/mutant-html/assets/webp_128/"+o[0].short+".webp")&&M(t,"src",l),i&1&&n!==(n=o[0].short+" emoji")&&M(t,"alt",n)},d(o){o&&E(t)}}}function bt(e){let t,l=e[0]&&Ae(e);return{c(){l&&l.c(),t=xe()},m(n,o){l&&l.m(n,o),O(n,t,o)},p(n,[o]){n[0]?l?l.p(n,o):(l=Ae(n),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},i:Y,o:Y,d(n){l&&l.d(n),n&&E(t)}}}function kt(e,t,l){let{emoji:n}=t;return e.$$set=o=>{"emoji"in o&&l(0,n=o.emoji)},[n]}class de extends Se{constructor(t){super(),Me(this,t,kt,bt,we,{emoji:0})}}function He(e,t,l){const n=e.slice();return n[45]=t[l],n}function Pe(e,t,l){const n=e.slice();return n[48]=t[l],n}function ze(e,t,l){const n=e.slice();return n[51]=t[l],n}function Ie(e,t,l){const n=e.slice();return n[7]=t[l],n}function Be(e,t,l){const n=e.slice();return n[56]=t[l],n}function qe(e,t,l){const n=e.slice();return n[59]=t[l],n}function Re(e,t,l){const n=e.slice();return n[62]=t[l],n[64]=l,n}function De(e){let t,l,n,o,i,s,c,r,_,m,v,g,h,b,P,U,H,C,V,R,w,D=e[13],a=[];for(let u=0;u<D.length;u+=1)a[u]=Ge(Re(e,D,u));const S=u=>I(a[u],1,1,()=>{a[u]=null});let p=Object.keys(e[19]),T=[];for(let u=0;u<p.length;u+=1)T[u]=Ke(qe(e,p,u));let B=Object.keys(e[18]),A=[];for(let u=0;u<B.length;u+=1)A[u]=Fe(Be(e,B,u));let z=e[12]==="html"&&Je(e),J=e[9],$=[];for(let u=0;u<J.length;u+=1)$[u]=Ve(ze(e,J,u));const he=u=>I($[u],1,1,()=>{$[u]=null});return{c(){t=j("div"),l=N(),n=j("div"),o=j("div"),i=j("div"),i.textContent="Categories:\xA0",s=N();for(let u=0;u<a.length;u+=1)a[u].c();c=N(),r=j("div"),r.textContent="Customize",_=N(),m=j("div"),v=j("input"),g=N(),h=j("select");for(let u=0;u<T.length;u+=1)T[u].c();b=N(),P=j("select");for(let u=0;u<A.length;u+=1)A[u].c();U=N(),z&&z.c(),H=N(),C=j("div");for(let u=0;u<$.length;u+=1)$[u].c();M(t,"class","bg-click svelte-1lyade3"),M(r,"class","customize btn svelte-1lyade3"),M(o,"class","categories svelte-1lyade3"),M(v,"type","text"),M(v,"class","input svelte-1lyade3"),M(v,"placeholder","Search emojis..."),M(h,"class","svelte-1lyade3"),e[12]===void 0&&le(()=>e[27].call(h)),M(P,"class","svelte-1lyade3"),e[11]===void 0&&le(()=>e[28].call(P)),M(m,"class","search svelte-1lyade3"),M(C,"class","emojis svelte-1lyade3"),M(n,"class","picker svelte-1lyade3")},m(u,y){O(u,t,y),O(u,l,y),O(u,n,y),k(n,o),k(o,i),k(o,s);for(let f=0;f<a.length;f+=1)a[f].m(o,null);k(o,c),k(o,r),k(n,_),k(n,m),k(m,v),Ne(v,e[4]),e[26](v),k(m,g),k(m,h);for(let f=0;f<T.length;f+=1)T[f].m(h,null);x(h,e[12]),k(m,b),k(m,P);for(let f=0;f<A.length;f+=1)A[f].m(P,null);x(P,e[11]),k(m,U),z&&z.m(m,null),k(n,H),k(n,C);for(let f=0;f<$.length;f+=1)$[f].m(C,null);V=!0,R||(w=[F(t,"click",e[22]),F(r,"click",e[24]),F(v,"input",e[25]),F(h,"change",e[27]),F(P,"change",e[28])],R=!0)},p(u,y){if(y[0]&24600){D=u[13];let f;for(f=0;f<D.length;f+=1){const G=Re(u,D,f);a[f]?(a[f].p(G,y),L(a[f],1)):(a[f]=Ge(G),a[f].c(),L(a[f],1),a[f].m(o,c))}for(ne(),f=D.length;f<a.length;f+=1)S(f);oe()}if(y[0]&16&&v.value!==u[4]&&Ne(v,u[4]),y[0]&524288){p=Object.keys(u[19]);let f;for(f=0;f<p.length;f+=1){const G=qe(u,p,f);T[f]?T[f].p(G,y):(T[f]=Ke(G),T[f].c(),T[f].m(h,null))}for(;f<T.length;f+=1)T[f].d(1);T.length=p.length}if(y[0]&528384&&x(h,u[12]),y[0]&262144){B=Object.keys(u[18]);let f;for(f=0;f<B.length;f+=1){const G=Be(u,B,f);A[f]?A[f].p(G,y):(A[f]=Fe(G),A[f].c(),A[f].m(P,null))}for(;f<A.length;f+=1)A[f].d(1);A.length=B.length}if(y[0]&264192&&x(P,u[11]),u[12]==="html"?z?z.p(u,y):(z=Je(u),z.c(),z.m(m,null)):z&&(z.d(1),z=null),y[0]&131584){J=u[9];let f;for(f=0;f<J.length;f+=1){const G=ze(u,J,f);$[f]?($[f].p(G,y),L($[f],1)):($[f]=Ve(G),$[f].c(),L($[f],1),$[f].m(C,null))}for(ne(),f=J.length;f<$.length;f+=1)he(f);oe()}},i(u){if(!V){for(let y=0;y<D.length;y+=1)L(a[y]);for(let y=0;y<J.length;y+=1)L($[y]);V=!0}},o(u){a=a.filter(Boolean);for(let y=0;y<a.length;y+=1)I(a[y]);$=$.filter(Boolean);for(let y=0;y<$.length;y+=1)I($[y]);V=!1},d(u){u&&E(t),u&&E(l),u&&E(n),X(a,u),e[26](null),X(T,u),X(A,u),z&&z.d(),X($,u),R=!1,Z(w)}}}function Ge(e){let t,l,n,o,i;l=new de({props:{emoji:e[14][e[64]]}});function s(){return e[23](e[64])}return{c(){t=j("div"),fe(l.$$.fragment),M(t,"class","cat btn svelte-1lyade3"),M(t,"title",e[62]),te(t,"highlight",e[64]===e[3]&&!e[4])},m(c,r){O(c,t,r),ie(l,t,null),n=!0,o||(i=F(t,"click",s),o=!0)},p(c,r){e=c,(!n||r[0]&24)&&te(t,"highlight",e[64]===e[3]&&!e[4])},i(c){n||(L(l.$$.fragment,c),n=!0)},o(c){I(l.$$.fragment,c),n=!1},d(c){c&&E(t),se(l),o=!1,i()}}}function Ke(e){let t,l=e[19][e[59]]+"",n;return{c(){t=j("option"),n=W(l),t.__value=e[59],t.value=t.__value},m(o,i){O(o,t,i),k(t,n)},p:Y,d(o){o&&E(t)}}}function Fe(e){let t,l=e[18][e[56]]+"",n;return{c(){t=j("option"),n=W(l),t.__value=e[56],t.value=t.__value},m(o,i){O(o,t,i),k(t,n)},p:Y,d(o){o&&E(t)}}}function Je(e){let t,l,n,o=Object.keys(e[6]),i=[];for(let s=0;s<o.length;s+=1)i[s]=Ue(Ie(e,o,s));return{c(){t=j("select");for(let s=0;s<i.length;s+=1)i[s].c();M(t,"class","svelte-1lyade3"),e[7]===void 0&&le(()=>e[29].call(t))},m(s,c){O(s,t,c);for(let r=0;r<i.length;r+=1)i[r].m(t,null);x(t,e[7]),l||(n=F(t,"change",e[29]),l=!0)},p(s,c){if(c[0]&64){o=Object.keys(s[6]);let r;for(r=0;r<o.length;r+=1){const _=Ie(s,o,r);i[r]?i[r].p(_,c):(i[r]=Ue(_),i[r].c(),i[r].m(t,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=o.length}c[0]&192&&x(t,s[7])},d(s){s&&E(t),X(i,s),l=!1,n()}}}function Ue(e){let t,l=e[7]==="custom"?"Custom: ":"",n,o,i=e[6][e[7]]+"",s,c,r;return{c(){t=j("option"),n=W(l),o=N(),s=W(i),c=W("x"),t.__value=r=e[7],t.value=t.__value},m(_,m){O(_,t,m),k(t,n),k(t,o),k(t,s),k(t,c)},p(_,m){m[0]&64&&l!==(l=_[7]==="custom"?"Custom: ":"")&&$e(n,l),m[0]&64&&i!==(i=_[6][_[7]]+"")&&$e(s,i),m[0]&64&&r!==(r=_[7])&&(t.__value=r,t.value=t.__value)},d(_){_&&E(t)}}}function Ve(e){let t,l,n,o,i,s,c,r;n=new de({props:{emoji:e[51]}});function _(){return e[30](e[51])}return{c(){t=j("div"),l=j("div"),fe(n.$$.fragment),i=N(),M(l,"class","emoji svelte-1lyade3"),M(l,"title",o=e[51].desc),M(t,"class","emoji btn svelte-1lyade3")},m(m,v){O(m,t,v),k(t,l),ie(n,l,null),k(t,i),s=!0,c||(r=F(t,"click",_),c=!0)},p(m,v){e=m;const g={};v[0]&512&&(g.emoji=e[51]),n.$set(g),(!s||v[0]&512&&o!==(o=e[51].desc))&&M(l,"title",o)},i(m){s||(L(n.$$.fragment,m),s=!0)},o(m){I(n.$$.fragment,m),s=!1},d(m){m&&E(t),se(n),c=!1,r()}}}function Xe(e){let t,l,n,o,i,s,c,r,_,m,v,g,h,b,P,U,H=Object.keys(e[15]),C=[];for(let a=0;a<H.length;a+=1)C[a]=Qe(Pe(e,H,a));const V=a=>I(C[a],1,1,()=>{C[a]=null});let R=e[8],w=[];for(let a=0;a<R.length;a+=1)w[a]=We(He(e,R,a));const D=a=>I(w[a],1,1,()=>{w[a]=null});return{c(){t=j("div"),l=N(),n=j("div"),o=j("div"),i=j("div"),i.textContent="Customize",s=N(),c=j("div"),c.textContent="Save",r=N(),_=j("div");for(let a=0;a<C.length;a+=1)C[a].c();m=N(),v=j("div"),g=N(),h=j("div");for(let a=0;a<w.length;a+=1)w[a].c();M(t,"class","bg-click svelte-1lyade3"),M(c,"class","customize svelte-1lyade3"),M(o,"class","categories svelte-1lyade3"),M(_,"class","emojis svelte-1lyade3"),M(v,"class","hr svelte-1lyade3"),M(h,"class","emojis svelte-1lyade3"),M(n,"class","picker svelte-1lyade3")},m(a,S){O(a,t,S),O(a,l,S),O(a,n,S),k(n,o),k(o,i),k(o,s),k(o,c),k(n,r),k(n,_);for(let p=0;p<C.length;p+=1)C[p].m(_,null);k(n,m),k(n,v),k(n,g),k(n,h);for(let p=0;p<w.length;p+=1)w[p].m(h,null);b=!0,P||(U=[F(t,"click",e[31]),F(c,"click",e[32])],P=!0)},p(a,S){if(S[0]&98310){H=Object.keys(a[15]);let p;for(p=0;p<H.length;p+=1){const T=Pe(a,H,p);C[p]?(C[p].p(T,S),L(C[p],1)):(C[p]=Qe(T),C[p].c(),L(C[p],1),C[p].m(_,null))}for(ne(),p=H.length;p<C.length;p+=1)V(p);oe()}if(S[0]&65798){R=a[8];let p;for(p=0;p<R.length;p+=1){const T=He(a,R,p);w[p]?(w[p].p(T,S),L(w[p],1)):(w[p]=We(T),w[p].c(),L(w[p],1),w[p].m(h,null))}for(ne(),p=R.length;p<w.length;p+=1)D(p);oe()}},i(a){if(!b){for(let S=0;S<H.length;S+=1)L(C[S]);for(let S=0;S<R.length;S+=1)L(w[S]);b=!0}},o(a){C=C.filter(Boolean);for(let S=0;S<C.length;S+=1)I(C[S]);w=w.filter(Boolean);for(let S=0;S<w.length;S+=1)I(w[S]);b=!1},d(a){a&&E(t),a&&E(l),a&&E(n),X(C,a),X(w,a),P=!1,Z(U)}}}function Qe(e){let t,l,n,o,i,s;l=new de({props:{emoji:e[16](e[48],e[1])}});function c(){return e[33](e[48])}return{c(){t=j("div"),fe(l.$$.fragment),n=N(),M(t,"class","emoji btn svelte-1lyade3"),te(t,"highlight",e[2]===e[48])},m(r,_){O(r,t,_),ie(l,t,null),k(t,n),o=!0,i||(s=F(t,"click",c),i=!0)},p(r,_){e=r;const m={};_[0]&2&&(m.emoji=e[16](e[48],e[1])),l.$set(m),(!o||_[0]&32772)&&te(t,"highlight",e[2]===e[48])},i(r){o||(L(l.$$.fragment,r),o=!0)},o(r){I(l.$$.fragment,r),o=!1},d(r){r&&E(t),se(l),i=!1,s()}}}function We(e){let t,l,n,o,i,s;l=new de({props:{emoji:e[16](e[2],e[45])}});function c(){return e[34](e[45])}return{c(){t=j("div"),fe(l.$$.fragment),n=N(),M(t,"class","emoji btn svelte-1lyade3"),te(t,"highlight",e[1]===e[45])},m(r,_){O(r,t,_),ie(l,t,null),k(t,n),o=!0,i||(s=F(t,"click",c),i=!0)},p(r,_){e=r;const m={};_[0]&260&&(m.emoji=e[16](e[2],e[45])),l.$set(m),(!o||_[0]&258)&&te(t,"highlight",e[1]===e[45])},i(r){o||(L(l.$$.fragment,r),o=!0)},o(r){I(l.$$.fragment,r),o=!1},d(r){r&&E(t),se(l),i=!1,s()}}}function yt(e){let t,l,n,o=e[0]&&De(e),i=e[10]&&Xe(e);return{c(){o&&o.c(),t=N(),i&&i.c(),l=xe()},m(s,c){o&&o.m(s,c),O(s,t,c),i&&i.m(s,c),O(s,l,c),n=!0},p(s,c){s[0]?o?(o.p(s,c),c[0]&1&&L(o,1)):(o=De(s),o.c(),L(o,1),o.m(t.parentNode,t)):o&&(ne(),I(o,1,1,()=>{o=null}),oe()),s[10]?i?(i.p(s,c),c[0]&1024&&L(i,1)):(i=Xe(s),i.c(),L(i,1),i.m(l.parentNode,l)):i&&(ne(),I(i,1,1,()=>{i=null}),oe())},i(s){n||(L(o),L(i),n=!0)},o(s){I(o),I(i),n=!1},d(s){o&&o.d(s),s&&E(t),i&&i.d(s),s&&E(l)}}}function jt(e,t,l){var Ee,Oe;let{emojis:n,categories:o,catIcons:i,morphs:s}=vt(),c=(Ee=localStorage.emoji_color)!=null?Ee:localStorage.emoji_color="default",r=(Oe=localStorage.emoji_morph)!=null?Oe:localStorage.emoji_morph="paw",_,m=(d,q="default")=>n.find(K=>K.root==="hand"&&K.morph===d&&K.color===q)||n.find(K=>K.root==="hand"&&K.morph===d),v=0,g="",h=[],{open:b=!1}=t,P=!1,U=-1,H=null,{commentMode:C=!1}=t;document.addEventListener("keydown",d=>{if(d.ctrlKey&&d.key==="."&&b===!1){if(H=d.target,H.tagName!=="TEXTAREA")return;l(20,C=H.placeholder==="leave a comment..."),d.preventDefault(),l(0,b=!0),U=H.selectionStart,console.log("opened",{open:b})}});let V=async d=>{let q=u(d);if(window.running_as_page){if("navigator"in window&&"clipboard"in navigator)await navigator.clipboard.writeText(q);else{let K=document.createElement("textarea");K.value=q,document.body.appendChild(K),K.select(),document.execCommand("copy"),document.body.removeChild(K)}a(`Copied <pre>${q.replace("<","&lt;")}</pre> to clipboard`)}else R(q);l(0,b=!1)},R=d=>{let q=H.value;H.value=q.slice(0,U)+d+q.slice(U),H.selectionStart=U+d.length,H.selectionEnd=U+d.length,H.dispatchEvent(new Event("input",{bubbles:!0}))},w={},{message:D=""}=t,a=d=>{l(21,D=d)},S={128:"128x128 image",32:"32x32 image",svg:"SVG, scalable"},p={128:d=>`https://lxhom.github.io/mutant-html/assets/webp_128/${d}.webp`,32:d=>`https://lxhom.github.io/mutant-html/assets/webp_32/${d}.webp`,svg:d=>`https://lxhom.github.io/mutant-html/assets/svg/${d}.svg`},T="128",B=[.5,.75,1,1.25,1.5,2,5,10];B.custom=1;let A="2",z={html:"HTML (Post)",md:"MD (Comment)"},J="html",$=()=>`width: calc(${B[A]} * var(--emoji-scale, 1.4em)); height: calc(${B[A]} * var(--emoji-scale, 1.4em)); margin: 0; display: inline;`,he={md:(d,q)=>`![${d}](${q})`,html:(d,q)=>`<img src="${q}" alt="${d}" title="${d}" style="${$()}"/>`},u=d=>{let q=d.desc.replace('"',"'"),K=d.short,at=p[T](K);return he[J](q,at)};const y=()=>l(0,b=!1),f=d=>{l(4,g=""),l(3,v=d)},G=()=>{l(0,b=!1),l(10,P=!0)};function tt(){g=this.value,l(4,g),l(0,b)}function lt(d){ee[d?"unshift":"push"](()=>{w=d,l(5,w)})}function nt(){J=ge(this),l(12,J),l(19,z)}function ot(){T=ge(this),l(11,T),l(18,S)}function it(){A=ge(this),l(7,A),l(6,B),l(7,A)}const st=d=>V(d),rt=()=>{l(0,b=!0),l(10,P=!1)},ct=()=>{l(0,b=!0),l(10,P=!1)},ft=d=>l(2,r=d),ut=d=>l(1,c=d);return e.$$set=d=>{"open"in d&&l(0,b=d.open),"commentMode"in d&&l(20,C=d.commentMode),"message"in d&&l(21,D=d.message)},e.$$.update=()=>{e.$$.dirty[0]&2&&(localStorage.emoji_color=c),e.$$.dirty[0]&4&&(localStorage.emoji_morph=r),e.$$.dirty[0]&4&&l(8,_=s[r]),e.$$.dirty[0]&1&&l(4,g=""),e.$$.dirty[0]&30&&l(9,h=n.filter(d=>!(o[v]!==d.cat&&!g||d.morph&&d.morph!==r||d.color&&d.color!==c||d.desc.indexOf(g)===-1&&d.short.indexOf(g)===-1))),e.$$.dirty[0]&33&&w&&w.focus&&(console.log("focusing",w),w.focus()),e.$$.dirty[0]&192&&A==="custom"&&l(6,B.custom=+prompt("Enter a custom scale (1 = 100%)",B.custom),B)},[b,c,r,v,g,w,B,A,_,h,P,T,J,o,i,s,m,V,S,z,C,D,y,f,G,tt,lt,nt,ot,it,st,rt,ct,ft,ut]}class wt extends Se{constructor(t){super(),Me(this,t,jt,yt,we,{open:0,commentMode:20,message:21},null,[-1,-1,-1])}}function Ct(e){let t,l,n,o,i,s,c,r,_,m,v,g;return{c(){t=j("p"),t.innerHTML='Hi there! This is the page hosting Mutant Standard for Cohost. See <a href="https://cohost.org/lexi/post/470324-if-you-ever-wanted-t/" target="_blank">the post on Cohost</a> for more.',l=N(),n=j("p"),n.innerHTML='This uses the <a href="https://mutant.tech">Mutant Standard</a> emoji set.',o=N(),i=j("p"),i.innerHTML='The emoji picker is available as an <a href="mutant-compiled.user.js" target="_blank">userscript</a>. Open it while focusing on a textbox with CTRL+. on Cohost, or use it here:',s=N(),c=j("p"),r=j("button"),r.textContent="Open picker",_=N(),m=j("p")},m(h,b){O(h,t,b),O(h,l,b),O(h,n,b),O(h,o,b),O(h,i,b),O(h,s,b),O(h,c,b),k(c,r),O(h,_,b),O(h,m,b),m.innerHTML=e[2],v||(g=F(r,"click",e[3]),v=!0)},p(h,b){b&4&&(m.innerHTML=h[2])},d(h){h&&E(t),h&&E(l),h&&E(n),h&&E(o),h&&E(i),h&&E(s),h&&E(c),h&&E(_),h&&E(m),v=!1,g()}}}function Mt(e){let t,l,n,o,i,s,c=window.running_as_page&&Ct(e);function r(g){e[4](g)}function _(g){e[5](g)}function m(g){e[6](g)}let v={};return e[0]!==void 0&&(v.open=e[0]),e[1]!==void 0&&(v.commentMode=e[1]),e[2]!==void 0&&(v.message=e[2]),l=new wt({props:v}),ee.push(()=>ke(l,"open",r)),ee.push(()=>ke(l,"commentMode",_)),ee.push(()=>ke(l,"message",m)),{c(){c&&c.c(),t=N(),fe(l.$$.fragment)},m(g,h){c&&c.m(g,h),O(g,t,h),ie(l,g,h),s=!0},p(g,[h]){window.running_as_page&&c.p(g,h);const b={};!n&&h&1&&(n=!0,b.open=g[0],ve(()=>n=!1)),!o&&h&2&&(o=!0,b.commentMode=g[1],ve(()=>o=!1)),!i&&h&4&&(i=!0,b.message=g[2],ve(()=>i=!1)),l.$set(b)},i(g){s||(L(l.$$.fragment,g),s=!0)},o(g){I(l.$$.fragment,g),s=!1},d(g){c&&c.d(g),g&&E(t),se(l,g)}}}function St(e,t,l){let n=!1,o=!1,i="";const s=()=>l(0,n=!0);function c(m){n=m,l(0,n)}function r(m){o=m,l(1,o)}function _(m){i=m,l(2,i)}return[n,o,i,s,c,r,_]}class Et extends Se{constructor(t){super(),Me(this,t,St,Mt,we,{})}}try{localStorage}catch{alert(`Cookies blocked on ${window.origin}! Cookies are necessary to store emoji metadata, sorry!`)}let Ot=async()=>{if(!localStorage.emoji_data)if(window.running_as_page){let l=await fetch("assets/data.json");localStorage.emoji_data=await l.text()}else{let l=await GM_fetch("https://lxhom.github.io/mutant-html/assets/data.json");localStorage.emoji_data=await l.text(),alert("Downloaded emoji data! Use CTRL+. in a textbox to open the emoji picker.")}let e=document.createElement("div");e.id="userscript-app",document.body.appendChild(e);const t=new Et({target:e});console.log("Svelte initialized on",t.$$.root)};Ot().then();;;});
=======
__init=false;window.onload=(async _=>{if(__init)return;__init=true;let style = document.createElement('style');style.innerHTML = `.input.svelte-12fmvmh.svelte-12fmvmh{height:1em}.bg-click.svelte-12fmvmh.svelte-12fmvmh{position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,.3);z-index:100}.picker.svelte-12fmvmh.svelte-12fmvmh{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);width:500px;height:500px;background:white;color:#000;border-radius:10px;z-index:101;display:flex;flex-direction:column;padding:10px}.categories.svelte-12fmvmh.svelte-12fmvmh{display:flex;flex-direction:row;flex-wrap:wrap}.categories.svelte-12fmvmh>div.svelte-12fmvmh:not(:last-child),.search.svelte-12fmvmh>input.svelte-12fmvmh{margin-right:10px}.search.svelte-12fmvmh.svelte-12fmvmh{display:flex;flex-direction:row;align-items:center;margin-bottom:10px}.search.svelte-12fmvmh>input.svelte-12fmvmh{flex:1}.emojis.svelte-12fmvmh.svelte-12fmvmh{display:flex;flex-direction:row;flex-wrap:wrap;overflow-y:scroll;font-size:200%}.emoji.svelte-12fmvmh.svelte-12fmvmh{margin:2px 5px}.highlight.svelte-12fmvmh.svelte-12fmvmh{background:#0ff}.customize.svelte-12fmvmh.svelte-12fmvmh{margin-left:auto}.hr.svelte-12fmvmh.svelte-12fmvmh{height:1px;background:#000;margin:5px 0}`;document.head.appendChild(style);;!function(){"use strict";function t(t){if("string"!=typeof t&&(t=""+t),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function e(t){return"string"!=typeof t&&(t=""+t),t}function r(t){this.map={},t instanceof r?t.forEach(function(t,e){this.append(e,t)},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function o(t){return t.bodyUsed?p.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function n(t){return new p(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function i(t){var e=new FileReader;return e.readAsArrayBuffer(t),n(e)}function s(t){var e=new FileReader;return e.readAsText(t),n(e)}function a(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,"string"==typeof t)this._bodyText=t;else if(c.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(c.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else{if(t)throw Error("unsupported BodyInit type");this._bodyText=""}},c.blob?(this.blob=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return p.resolve(this._bodyBlob);if(this._bodyFormData)throw Error("could not read FormData body as blob");return p.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(i)},this.text=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return s(this._bodyBlob);if(this._bodyFormData)throw Error("could not read FormData body as text");return p.resolve(this._bodyText)}):this.text=function(){var t=o(this);return t?t:p.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(f)}),this.json=function(){return this.text().then(JSON.parse)},this}function u(t){var e=t.toUpperCase();return y.indexOf(e)>-1?e:t}function h(t,e){if(e=e||{},this.url=t,this.credentials=e.credentials||"omit",this.headers=new r(e.headers),this.method=u(e.method||"GET"),this.mode=e.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&e.body)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(e.body)}function f(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var r=t.split("="),o=r.shift().replace(/\+/g," "),n=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(o),decodeURIComponent(n))}}),e}function d(t){var e=new r,o=t.trim().split("\n");return o.forEach(function(t){var r=t.trim().split(":"),o=r.shift().trim(),n=r.join(":").trim();e.append(o,n)}),e}function l(t,e){e||(e={}),this._initBody(t),this.type="default",this.url=null,this.status=e.status,this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText,this.headers=e.headers instanceof r?e.headers:new r(e.headers),this.url=e.url||""}var p=window.Bluebird||window.Promise;if(!self.GM_fetch){r.prototype.append=function(r,o){r=t(r),o=e(o);var n=this.map[r];n||(n=[],this.map[r]=n),n.push(o)},r.prototype["delete"]=function(e){delete this.map[t(e)]},r.prototype.get=function(e){var r=this.map[t(e)];return r?r[0]:null},r.prototype.getAll=function(e){return this.map[t(e)]||[]},r.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},r.prototype.set=function(r,o){this.map[t(r)]=[e(o)]},r.prototype.forEach=function(t,e){Object.getOwnPropertyNames(this.map).forEach(function(r){this.map[r].forEach(function(o){t.call(e,o,r,this)},this)},this)};var c={blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in self},y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];a.call(h.prototype),a.call(l.prototype),self.Headers=r,self.Request=h,self.Response=l,self.GM_fetch=function(t,e){var r;return r=h.prototype.isPrototypeOf(t)&&!e?t:new h(t,e),new p(function(t,e){function o(t,e,r){return t?t:/^X-Request-URL:/m.test(e)?r.get("X-Request-URL"):void 0}var n,i={};i.method=r.method,i.url=r.url,i.synchronous=!1,i.onload=function(r){var i=r.status;if(100>i||i>599)return void e(new TypeError("Network request failed"));var s=r.responseHeaders;n=d(s);var a={status:i,statusText:r.statusText,headers:n,url:o(r.finalUrl,s,n)},u=r.responseText;t(new l(u,a))},i.onerror=function(){e(new TypeError("Network request failed"))},i.headers={},r.headers.forEach(function(t,e){i.headers[e]=t}),void 0!==r._bodyInit&&(i.data=r._bodyInit),GM_xmlhttpRequest(i)})},self.GM_fetch.polyfill=!0}}();;;(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();function se(){}function Ge(e){return e()}function Te(){return Object.create(null)}function V(e){e.forEach(Ge)}function Je(e){return typeof e=="function"}function Me(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let ae;function Oe(e,t){return ae||(ae=document.createElement("a")),ae.href=t,e===ae.href}function Ve(e){return Object.keys(e).length===0}function k(e,t){e.appendChild(t)}function $(e,t,n){e.insertBefore(t,n||null)}function E(e){e.parentNode&&e.parentNode.removeChild(e)}function _e(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function y(e){return document.createElement(e)}function ie(e){return document.createTextNode(e)}function N(){return ie(" ")}function Xe(){return ie("")}function B(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function j(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function We(e){return Array.from(e.childNodes)}function Ne(e,t){e.value=t==null?"":t}function He(e,t,n,l){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,l?"important":"")}function Z(e,t,n){e.classList[n?"add":"remove"](t)}let Se;function re(e){Se=e}const oe=[],Y=[],de=[],je=[],Ye=Promise.resolve();let ye=!1;function Ze(){ye||(ye=!0,Ye.then(Qe))}function Ce(e){de.push(e)}function be(e){je.push(e)}const ke=new Set;let me=0;function Qe(){const e=Se;do{for(;me<oe.length;){const t=oe[me];me++,re(t),xe(t.$$)}for(re(null),oe.length=0,me=0;Y.length;)Y.pop()();for(let t=0;t<de.length;t+=1){const n=de[t];ke.has(n)||(ke.add(n),n())}de.length=0}while(oe.length);for(;je.length;)je.pop()();ye=!1,ke.clear(),re(e)}function xe(e){if(e.fragment!==null){e.update(),V(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Ce)}}const he=new Set;let Q;function x(){Q={r:0,c:[],p:Q}}function ee(){Q.r||V(Q.c),Q=Q.p}function L(e,t){e&&e.i&&(he.delete(e),e.i(t))}function H(e,t,n,l){if(e&&e.o){if(he.has(e))return;he.add(e),Q.c.push(()=>{he.delete(e),l&&(n&&e.d(1),l())}),e.o(t)}else l&&l()}function we(e,t,n){const l=e.$$.props[t];l!==void 0&&(e.$$.bound[l]=n,n(e.$$.ctx[l]))}function fe(e){e&&e.c()}function te(e,t,n,l){const{fragment:o,after_update:i}=e.$$;o&&o.m(t,n),l||Ce(()=>{const r=e.$$.on_mount.map(Ge).filter(Je);e.$$.on_destroy?e.$$.on_destroy.push(...r):V(r),e.$$.on_mount=[]}),i.forEach(Ce)}function ne(e,t){const n=e.$$;n.fragment!==null&&(V(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function et(e,t){e.$$.dirty[0]===-1&&(oe.push(e),Ze(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Ee(e,t,n,l,o,i,r,f=[-1]){const s=Se;re(e);const u=e.$$={fragment:null,ctx:[],props:i,update:se,not_equal:o,bound:Te(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(s?s.$$.context:[])),callbacks:Te(),dirty:f,skip_bound:!1,root:t.target||s.$$.root};r&&r(u.root);let p=!1;if(u.ctx=n?n(e,t.props||{},(v,d,...c)=>{const _=c.length?c[0]:d;return u.ctx&&o(u.ctx[v],u.ctx[v]=_)&&(!u.skip_bound&&u.bound[v]&&u.bound[v](_),p&&et(e,v)),d}):[],u.update(),p=!0,V(u.before_update),u.fragment=l?l(u.ctx):!1,t.target){if(t.hydrate){const v=We(t.target);u.fragment&&u.fragment.l(v),v.forEach(E)}else u.fragment&&u.fragment.c();t.intro&&L(e.$$.fragment),te(e,t.target,t.anchor,t.customElement),Qe()}re(s)}class $e{$destroy(){ne(this,1),this.$destroy=se}$on(t,n){if(!Je(n))return se;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const o=l.indexOf(n);o!==-1&&l.splice(o,1)}}$set(t){this.$$set&&!Ve(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function tt(){let e=[],t=[],n=[],l={},o=r=>[...new Set(r)];e=JSON.parse(localStorage.emoji_data);let i={};for(let r of e){let f=r.cat;if(t.includes(f)||(t.push(f),n.push(r),i[f]={}),i[f][r.root]||(i[f][r.root]=[]),i[f][r.root].push(r),r.root==="hand"){let{morph:s,color:u}=r;l[s]||(l[s]=[]),l[s]=o([...l[s],u])}}return{emojis:e,categories:t,catIcons:n,morphs:l}}function Ae(e){let t,n,l;return{c(){t=y("img"),Oe(t.src,n="https://lxhom.github.io/mutant-html/assets/webp_128/"+e[0].short+".webp")||j(t,"src",n),He(t,"width","1em"),He(t,"height","1em"),j(t,"alt",l=e[0].short+" emoji")},m(o,i){$(o,t,i)},p(o,i){i&1&&!Oe(t.src,n="https://lxhom.github.io/mutant-html/assets/webp_128/"+o[0].short+".webp")&&j(t,"src",n),i&1&&l!==(l=o[0].short+" emoji")&&j(t,"alt",l)},d(o){o&&E(t)}}}function nt(e){let t,n=e[0]&&Ae(e);return{c(){n&&n.c(),t=Xe()},m(l,o){n&&n.m(l,o),$(l,t,o)},p(l,[o]){l[0]?n?n.p(l,o):(n=Ae(l),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:se,o:se,d(l){n&&n.d(l),l&&E(t)}}}function lt(e,t,n){let{emoji:l}=t;return e.$$set=o=>{"emoji"in o&&n(0,l=o.emoji)},[l]}class pe extends $e{constructor(t){super(),Ee(this,t,lt,nt,Me,{emoji:0})}}function Pe(e,t,n){const l=e.slice();return l[37]=t[n],l}function ze(e,t,n){const l=e.slice();return l[40]=t[n],l}function Be(e,t,n){const l=e.slice();return l[43]=t[n],l}function Ie(e,t,n){const l=e.slice();return l[46]=t[n],l[48]=n,l}function qe(e){let t,n,l,o,i,r,f,s,u,p,v,d,c,_,I,z,A,w,q,P,S,D,a,C,m,K,X,W,le,ce,U=e[11],T=[];for(let h=0;h<U.length;h+=1)T[h]=Re(Ie(e,U,h));const ge=h=>H(T[h],1,1,()=>{T[h]=null});let F=e[8],O=[];for(let h=0;h<F.length;h+=1)O[h]=De(Be(e,F,h));const ve=h=>H(O[h],1,1,()=>{O[h]=null});return{c(){t=y("div"),n=N(),l=y("div"),o=y("div"),i=y("div"),i.textContent="Categories",r=N();for(let h=0;h<T.length;h+=1)T[h].c();f=N(),s=y("div"),s.textContent="Customize",u=N(),p=y("div"),v=y("input"),d=N(),c=y("div"),_=y("input"),I=N(),z=y("label"),z.textContent="Bigger",A=ie(" | "),w=y("input"),q=N(),P=y("label"),P.textContent="Comment mode",S=N(),D=y("sub"),a=ie("?"),C=ie(" | "),m=y("span"),m.textContent="Close",K=N(),X=y("div");for(let h=0;h<O.length;h+=1)O[h].c();j(t,"class","bg-click svelte-12fmvmh"),j(i,"class","svelte-12fmvmh"),j(s,"class","customize svelte-12fmvmh"),j(o,"class","categories svelte-12fmvmh"),j(v,"type","text"),j(v,"class","input svelte-12fmvmh"),j(v,"placeholder","Search emojis..."),j(_,"type","checkbox"),j(_,"id","bigger"),j(z,"for","bigger"),j(w,"type","checkbox"),j(w,"id","commentMode"),j(P,"for","commentMode"),j(D,"title",e[16]),j(m,"class","close"),j(p,"class","search svelte-12fmvmh"),j(X,"class","emojis svelte-12fmvmh"),j(l,"class","picker svelte-12fmvmh")},m(h,M){$(h,t,M),$(h,n,M),$(h,l,M),k(l,o),k(o,i),k(o,r);for(let b=0;b<T.length;b+=1)T[b].m(o,null);k(o,f),k(o,s),k(l,u),k(l,p),k(p,v),Ne(v,e[5]),e[22](v),k(p,d),k(p,c),k(c,_),_.checked=e[10],k(c,I),k(c,z),k(c,A),k(c,w),w.checked=e[1],k(c,q),k(c,P),k(c,S),k(c,D),k(D,a),k(c,C),k(c,m),k(l,K),k(l,X);for(let b=0;b<O.length;b+=1)O[b].m(X,null);W=!0,le||(ce=[B(t,"click",e[18]),B(s,"click",e[20]),B(v,"input",e[21]),B(_,"change",e[23]),B(w,"change",e[24]),B(D,"click",e[25]),B(m,"click",e[26])],le=!0)},p(h,M){if(M[0]&6192){U=h[11];let b;for(b=0;b<U.length;b+=1){const G=Ie(h,U,b);T[b]?(T[b].p(G,M),L(T[b],1)):(T[b]=Re(G),T[b].c(),L(T[b],1),T[b].m(o,f))}for(x(),b=U.length;b<T.length;b+=1)ge(b);ee()}if(M[0]&32&&v.value!==h[5]&&Ne(v,h[5]),M[0]&1024&&(_.checked=h[10]),M[0]&2&&(w.checked=h[1]),M[0]&33024){F=h[8];let b;for(b=0;b<F.length;b+=1){const G=Be(h,F,b);O[b]?(O[b].p(G,M),L(O[b],1)):(O[b]=De(G),O[b].c(),L(O[b],1),O[b].m(X,null))}for(x(),b=F.length;b<O.length;b+=1)ve(b);ee()}},i(h){if(!W){for(let M=0;M<U.length;M+=1)L(T[M]);for(let M=0;M<F.length;M+=1)L(O[M]);W=!0}},o(h){T=T.filter(Boolean);for(let M=0;M<T.length;M+=1)H(T[M]);O=O.filter(Boolean);for(let M=0;M<O.length;M+=1)H(O[M]);W=!1},d(h){h&&E(t),h&&E(n),h&&E(l),_e(T,h),e[22](null),_e(O,h),le=!1,V(ce)}}}function Re(e){let t,n,l,o,i,r;l=new pe({props:{emoji:e[12][e[48]]}});function f(){return e[19](e[48])}return{c(){t=y("div"),n=y("div"),fe(l.$$.fragment),j(n,"title",e[46]),j(t,"class","category svelte-12fmvmh"),Z(t,"highlight",e[48]===e[4]&&!e[5])},m(s,u){$(s,t,u),k(t,n),te(l,n,null),o=!0,i||(r=B(t,"click",f),i=!0)},p(s,u){e=s,(!o||u[0]&48)&&Z(t,"highlight",e[48]===e[4]&&!e[5])},i(s){o||(L(l.$$.fragment,s),o=!0)},o(s){H(l.$$.fragment,s),o=!1},d(s){s&&E(t),ne(l),i=!1,r()}}}function De(e){let t,n,l,o,i,r,f,s;l=new pe({props:{emoji:e[43]}});function u(){return e[27](e[43])}return{c(){t=y("div"),n=y("div"),fe(l.$$.fragment),i=N(),j(n,"class","emoji svelte-12fmvmh"),j(n,"title",o=e[43].desc),j(t,"class","emoji svelte-12fmvmh")},m(p,v){$(p,t,v),k(t,n),te(l,n,null),k(t,i),r=!0,f||(s=B(t,"click",u),f=!0)},p(p,v){e=p;const d={};v[0]&256&&(d.emoji=e[43]),l.$set(d),(!r||v[0]&256&&o!==(o=e[43].desc))&&j(n,"title",o)},i(p){r||(L(l.$$.fragment,p),r=!0)},o(p){H(l.$$.fragment,p),r=!1},d(p){p&&E(t),ne(l),f=!1,s()}}}function Ke(e){let t,n,l,o,i,r,f,s,u,p,v,d,c,_,I,z,A=Object.keys(e[13]),w=[];for(let a=0;a<A.length;a+=1)w[a]=Ue(ze(e,A,a));const q=a=>H(w[a],1,1,()=>{w[a]=null});let P=e[7],S=[];for(let a=0;a<P.length;a+=1)S[a]=Fe(Pe(e,P,a));const D=a=>H(S[a],1,1,()=>{S[a]=null});return{c(){t=y("div"),n=N(),l=y("div"),o=y("div"),i=y("div"),i.textContent="Customize",r=N(),f=y("div"),f.textContent="Save",s=N(),u=y("div");for(let a=0;a<w.length;a+=1)w[a].c();p=N(),v=y("div"),d=N(),c=y("div");for(let a=0;a<S.length;a+=1)S[a].c();j(t,"class","bg-click svelte-12fmvmh"),j(i,"class","svelte-12fmvmh"),j(f,"class","customize svelte-12fmvmh"),j(o,"class","categories svelte-12fmvmh"),j(u,"class","emojis svelte-12fmvmh"),j(v,"class","hr svelte-12fmvmh"),j(c,"class","emojis svelte-12fmvmh"),j(l,"class","picker svelte-12fmvmh")},m(a,C){$(a,t,C),$(a,n,C),$(a,l,C),k(l,o),k(o,i),k(o,r),k(o,f),k(l,s),k(l,u);for(let m=0;m<w.length;m+=1)w[m].m(u,null);k(l,p),k(l,v),k(l,d),k(l,c);for(let m=0;m<S.length;m+=1)S[m].m(c,null);_=!0,I||(z=[B(t,"click",e[28]),B(f,"click",e[29])],I=!0)},p(a,C){if(C[0]&24588){A=Object.keys(a[13]);let m;for(m=0;m<A.length;m+=1){const K=ze(a,A,m);w[m]?(w[m].p(K,C),L(w[m],1)):(w[m]=Ue(K),w[m].c(),L(w[m],1),w[m].m(u,null))}for(x(),m=A.length;m<w.length;m+=1)q(m);ee()}if(C[0]&16524){P=a[7];let m;for(m=0;m<P.length;m+=1){const K=Pe(a,P,m);S[m]?(S[m].p(K,C),L(S[m],1)):(S[m]=Fe(K),S[m].c(),L(S[m],1),S[m].m(c,null))}for(x(),m=P.length;m<S.length;m+=1)D(m);ee()}},i(a){if(!_){for(let C=0;C<A.length;C+=1)L(w[C]);for(let C=0;C<P.length;C+=1)L(S[C]);_=!0}},o(a){w=w.filter(Boolean);for(let C=0;C<w.length;C+=1)H(w[C]);S=S.filter(Boolean);for(let C=0;C<S.length;C+=1)H(S[C]);_=!1},d(a){a&&E(t),a&&E(n),a&&E(l),_e(w,a),_e(S,a),I=!1,V(z)}}}function Ue(e){let t,n,l,o,i,r;n=new pe({props:{emoji:e[14](e[40],e[2])}});function f(){return e[30](e[40])}return{c(){t=y("div"),fe(n.$$.fragment),l=N(),j(t,"class","emoji svelte-12fmvmh"),Z(t,"highlight",e[3]===e[40])},m(s,u){$(s,t,u),te(n,t,null),k(t,l),o=!0,i||(r=B(t,"click",f),i=!0)},p(s,u){e=s;const p={};u[0]&4&&(p.emoji=e[14](e[40],e[2])),n.$set(p),(!o||u[0]&8200)&&Z(t,"highlight",e[3]===e[40])},i(s){o||(L(n.$$.fragment,s),o=!0)},o(s){H(n.$$.fragment,s),o=!1},d(s){s&&E(t),ne(n),i=!1,r()}}}function Fe(e){let t,n,l,o,i,r;n=new pe({props:{emoji:e[14](e[3],e[37])}});function f(){return e[31](e[37])}return{c(){t=y("div"),fe(n.$$.fragment),l=N(),j(t,"class","emoji svelte-12fmvmh"),Z(t,"highlight",e[2]===e[37])},m(s,u){$(s,t,u),te(n,t,null),k(t,l),o=!0,i||(r=B(t,"click",f),i=!0)},p(s,u){e=s;const p={};u[0]&136&&(p.emoji=e[14](e[3],e[37])),n.$set(p),(!o||u[0]&132)&&Z(t,"highlight",e[2]===e[37])},i(s){o||(L(n.$$.fragment,s),o=!0)},o(s){H(n.$$.fragment,s),o=!1},d(s){s&&E(t),ne(n),i=!1,r()}}}function ot(e){let t,n,l,o=e[0]&&qe(e),i=e[9]&&Ke(e);return{c(){o&&o.c(),t=N(),i&&i.c(),n=Xe()},m(r,f){o&&o.m(r,f),$(r,t,f),i&&i.m(r,f),$(r,n,f),l=!0},p(r,f){r[0]?o?(o.p(r,f),f[0]&1&&L(o,1)):(o=qe(r),o.c(),L(o,1),o.m(t.parentNode,t)):o&&(x(),H(o,1,1,()=>{o=null}),ee()),r[9]?i?(i.p(r,f),f[0]&512&&L(i,1)):(i=Ke(r),i.c(),L(i,1),i.m(n.parentNode,n)):i&&(x(),H(i,1,1,()=>{i=null}),ee())},i(r){l||(L(o),L(i),l=!0)},o(r){H(o),H(i),l=!1},d(r){o&&o.d(r),r&&E(t),i&&i.d(r),r&&E(n)}}}function it(e,t,n){var G,Le;let{emojis:l,categories:o,catIcons:i,morphs:r}=tt(),f=(G=localStorage.emoji_color)!=null?G:localStorage.emoji_color="default",s=(Le=localStorage.emoji_morph)!=null?Le:localStorage.emoji_morph="paw",u,p=(g,J="default")=>l.find(R=>R.root==="hand"&&R.morph===g&&R.color===J)||l.find(R=>R.root==="hand"&&R.morph===g),v=0,d="",c=[],{open:_=!1}=t,I=!1,z=!1,A=-1,w=null,{commentMode:q=!1}=t;document.addEventListener("keydown",g=>{if(g.ctrlKey&&g.key==="."&&_===!1){if(w=g.target,w.tagName!=="TEXTAREA")return;n(1,q=w.placeholder==="leave a comment..."),g.preventDefault(),n(0,_=!0),A=w.selectionStart,console.log("opened",{open:_})}});let P=async g=>{let J=g.desc.replace('"',"'"),R=q?`![${J}](https://lxhom.github.io/mutant-html/assets/webp_${z?128:32}/${g.short}.webp#_generated_with_mutant.us.to)`:`<img src="https://lxhom.github.io/mutant-html/assets/webp_128/${g.short}.webp#_generated_with_mutant.us.to" alt="${J}" title="${J}" style="width: ${z?2:1}em; height: ${z?2:1}em; margin: 0; display: inline;">`;if(window.running_as_page){if("navigator"in window&&"clipboard"in navigator)await navigator.clipboard.writeText(R);else{let ue=document.createElement("textarea");ue.value=R,document.body.appendChild(ue),ue.select(),document.execCommand("copy"),document.body.removeChild(ue)}m(`Copied <pre>${R.replace("<","&lt;")}</pre> to clipboard`)}else S(R);n(0,_=!1)},S=g=>{let J=w.value;w.value=J.slice(0,A)+g+J.slice(A),w.selectionStart=A+g.length,w.selectionEnd=A+g.length,w.dispatchEvent(new Event("input",{bubbles:!0}))},D="Use Markdown syntax ![]() instead of HTML syntax <img> to use them in places without HTML support, like Cohost comments.",a={},{message:C=""}=t,m=g=>{n(17,C=g)};const K=()=>n(0,_=!1),X=g=>{n(5,d=""),n(4,v=g)},W=()=>{n(0,_=!1),n(9,I=!0)};function le(){d=this.value,n(5,d),n(0,_)}function ce(g){Y[g?"unshift":"push"](()=>{a=g,n(6,a)})}function U(){z=this.checked,n(10,z)}function T(){q=this.checked,n(1,q)}const ge=()=>alert(D),F=()=>n(0,_=!1),O=g=>P(g),ve=()=>{n(0,_=!0),n(9,I=!1)},h=()=>{n(0,_=!0),n(9,I=!1)},M=g=>n(3,s=g),b=g=>n(2,f=g);return e.$$set=g=>{"open"in g&&n(0,_=g.open),"commentMode"in g&&n(1,q=g.commentMode),"message"in g&&n(17,C=g.message)},e.$$.update=()=>{e.$$.dirty[0]&4&&(localStorage.emoji_color=f),e.$$.dirty[0]&8&&(localStorage.emoji_morph=s),e.$$.dirty[0]&8&&n(7,u=r[s]),e.$$.dirty[0]&1&&n(5,d=""),e.$$.dirty[0]&60&&n(8,c=l.filter(g=>!(o[v]!==g.cat&&!d||g.morph&&g.morph!==s||g.color&&g.color!==f||g.desc.indexOf(d)===-1&&g.short.indexOf(d)===-1))),e.$$.dirty[0]&65&&a&&a.focus&&(console.log("focusing",a),a.focus())},[_,q,f,s,v,d,a,u,c,I,z,o,i,r,p,P,D,C,K,X,W,le,ce,U,T,ge,F,O,ve,h,M,b]}class rt extends $e{constructor(t){super(),Ee(this,t,it,ot,Me,{open:0,commentMode:1,message:17},null,[-1,-1])}}function st(e){let t,n,l,o,i,r,f,s,u,p,v,d;return{c(){t=y("p"),t.innerHTML='Hi there! This is the page hosting Mutant Standard for Cohost. See <a href="https://cohost.org/lexi/post/470324-if-you-ever-wanted-t/" target="_blank">the post on Cohost</a> for more.',n=N(),l=y("p"),l.innerHTML='This uses the <a href="https://mutant.tech">Mutant Standard</a> emoji set.',o=N(),i=y("p"),i.innerHTML='The emoji picker is available as an <a href="mutant-compiled.user.js" target="_blank">userscript</a>. Open it while focusing on a textbox with CTRL+. on Cohost, or use it here:',r=N(),f=y("p"),s=y("button"),s.textContent="Open picker",u=N(),p=y("p")},m(c,_){$(c,t,_),$(c,n,_),$(c,l,_),$(c,o,_),$(c,i,_),$(c,r,_),$(c,f,_),k(f,s),$(c,u,_),$(c,p,_),p.innerHTML=e[2],v||(d=B(s,"click",e[3]),v=!0)},p(c,_){_&4&&(p.innerHTML=c[2])},d(c){c&&E(t),c&&E(n),c&&E(l),c&&E(o),c&&E(i),c&&E(r),c&&E(f),c&&E(u),c&&E(p),v=!1,d()}}}function ft(e){let t,n,l,o,i,r,f=window.running_as_page&&st(e);function s(d){e[4](d)}function u(d){e[5](d)}function p(d){e[6](d)}let v={};return e[0]!==void 0&&(v.open=e[0]),e[1]!==void 0&&(v.commentMode=e[1]),e[2]!==void 0&&(v.message=e[2]),n=new rt({props:v}),Y.push(()=>we(n,"open",s)),Y.push(()=>we(n,"commentMode",u)),Y.push(()=>we(n,"message",p)),{c(){f&&f.c(),t=N(),fe(n.$$.fragment)},m(d,c){f&&f.m(d,c),$(d,t,c),te(n,d,c),r=!0},p(d,[c]){window.running_as_page&&f.p(d,c);const _={};!l&&c&1&&(l=!0,_.open=d[0],be(()=>l=!1)),!o&&c&2&&(o=!0,_.commentMode=d[1],be(()=>o=!1)),!i&&c&4&&(i=!0,_.message=d[2],be(()=>i=!1)),n.$set(_)},i(d){r||(L(n.$$.fragment,d),r=!0)},o(d){H(n.$$.fragment,d),r=!1},d(d){f&&f.d(d),d&&E(t),ne(n,d)}}}function ct(e,t,n){let l=!1,o=!1,i="";const r=()=>n(0,l=!0);function f(p){l=p,n(0,l)}function s(p){o=p,n(1,o)}function u(p){i=p,n(2,i)}return[l,o,i,r,f,s,u]}class ut extends $e{constructor(t){super(),Ee(this,t,ct,ft,Me,{})}}try{localStorage}catch{alert(`Cookies blocked on ${window.origin}! Cookies are necessary to store emoji metadata, sorry!`)}let at=async()=>{if(!localStorage.emoji_data)if(window.running_as_page){let n=await fetch("assets/data.json");localStorage.emoji_data=await n.text()}else{let n=await GM_fetch("https://lxhom.github.io/mutant-html/assets/data.json");localStorage.emoji_data=await n.text(),alert("Downloaded emoji data! Use CTRL+. in a textbox to open the emoji picker.")}let e=document.createElement("div");e.id="userscript-app",document.body.appendChild(e);const t=new ut({target:e});console.log("Svelte initialized on",t.$$.root)};at().then();;;});
>>>>>>> a45fbfa60402065bc99643c7045dc137d12cbde8
